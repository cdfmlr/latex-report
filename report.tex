\documentclass[12]{ctexart}

\input{base.tex}

\begin{document}

% ================= title =================

\title{
    一种简单的 \LaTeX 中文报告\bigskip\par
    排版示例
}
\author{
\begin{tabular}{cc}
    \textbf{神经漫游者大学} & \textbf{全息玫瑰种植园} \\
    珂朵莉 & 9784041022696 \\
    W.A. Automaton & 9784041022697 \\
    蒟\quad 蒻 & 9784041022698
\end{tabular}
}

\makeatletter
\renewcommand{\maketitle}{
    \begin{center}
        {\heiti\fontsize{15pt}{\baselineskip}\bfseries\@title}%
        \bigskip\par\noindent
        {\songti\normalsize\@author}%
        \bigskip\par\noindent
    \end{center}
}
\makeatother

\maketitle

% =============== abstract ===============

{\noindent\bfseries{摘要}}:
本文展示了一个简单报告的模版，提供算法、代码、三线表、图片、双图并排等常用语法实例。

{\noindent\bfseries{关键词}}:
排版, \LaTeX, \CTeX, 数学, 算法, 代码, 表格, 图片

% \setcounter{section}{-1} % 从 0 开始编 section 号

% =============== content ===============

\section{概述}

该文档是一个简单的 \LaTeX 中文报告示例，旨在展示一些常见的排版语法和效果。

该文档基于包括但不限于 \CTeX \cite{ctex}、amsmath、algorithm2e\cite{algorithm2e}、listings\cite{listings}、threeparttable 等宏包进行排版。\footnote{此处的参考引用也只作为排版示例，不全面和准确。}

本文第 \ref{sec_text}、\ref{sec_math}、\ref{sec_enum_algo_code}、\ref{sec_table_img} 节展示了一些常见的文本、数学、枚举、算法、代码、表格 和 图片等排版。

可以借助 VS Code + \LaTeX\ Workshop 编译该文档，如附录 \ref{appendix_a} 所示。

\section{文本}\label{sec_text}

\subsection{基础正文}

银河系西旋臂少人问津的末端，未经勘测的荒僻区域深处，有一颗无人理睬的小小黄色恒星。\footnote{本节内容选自《银河系搭车客指南》（道格拉斯·亚当斯 著，姚向辉 译，上海译文出版社，2014）}

以约莫九千两百万英里半径绕其旋转的，是一颗彻底无关紧要的小小蓝绿色行星，这里从\emph{猿猴}繁衍而来的生命形式原始得让人吃惊，居然还以为\emph{数字式电子表}是什么很高明的主意。

这颗行星有（更确切的说法： 曾经有）一个问题，那就是： 星球上的绝大多数居民在绝大多数时间里都不开心。针对这个问题提出过许多解决方案，但绝大多数方案基本上都和某种绿色小纸片的流动相关，这可真是怪事一桩，因为从头到尾不开心的又不是绿色小纸片。

于是乎，问题依然如故；很多人类过得一塌糊涂，其中大部分更是生不如死，连戴数字式电子表的也不例外。

很多人越来越认为，当初从树上下来已是大错特错。有些人甚至说连上树这一步都不对，一开始就不该离开海洋。

如此这般，距离某君因为说大家都该换换思路、与人为善而被钉在树上约两千年后的某个星期四，有位姑娘独自坐在里克曼沃斯的小咖啡馆里，忽然领悟到一直以来究竟是哪儿出了岔子，终于知道了怎样把这个世界变成和谐欢乐的好地方。这次的解决方案很正确，能成功，也不会有人被钉在任何东西上。

可令人悲哀的是，在她有机会找到电话告诉别人之前，一场恐怖而愚蠢的大灾难陡然降临，她的想法因此永远湮灭。

这是她的故事。

\subsection{文本样式}\label{sec_text_style}

以下是一些常见的文本样式演示。冒号（“：”）左边为效果，右边为 LaTeX 代码。

\begin{itemize}
    \item \textbf{粗体}：\verb|\textbf{粗体}的文字|
    \item \textit{斜体}：\verb|\textit{斜体}的文字|
    \item \underline{下划线}：\verb|\underline{下划线}的文字|
    \item \emph{强调}：\verb|\emph{强调}的文字|
    \item \texttt{等宽}：\verb|\texttt{等宽}的文字|
    \item \textsc{小型大写}：\verb|\textsc{小型大写}的文字|
    \item \textsf{无衬线}：\verb|\textsf{无衬线}的文字|
    \item \textcolor{red}{红色}：\verb|\textcolor{red}{红色}的文字|
    \item URL，如 \url{https://url.com}：\verb|\url{https://url.com}|
    \item 超链接，如 \href{https://url.com}{链接}：\verb|\href{https://url.com}{链接}|
    \item 脚注\footnote{这是一个脚注}：\verb|\footnote{这是一个脚注}|
    \item 交叉引用，如 \ref{sec_math_example} 节：\verb|\ref{sec_math_example}|
\end{itemize}

行内数学公式，参考第 \ref{sec_math} 节。行内代码参考第 \ref{sec_inline_code} 节。

\section{数学}\label{sec_math}

\subsection{基础数学}

行内数学公式，如 $a^2 + b^2 = c^2$ 可通过 \verb|$a^2 + b^2 = c^2$| 实现，或者，也可以使用 \verb$\(...\)$，如 \( e^{i\pi} + 1 = 0 \)。

下面则是一个独立的数学公式，通过 \verb$\[...\]$ 实现：

\[
    \int_{0}^{\infty} e^{-x^2} dx = \frac{\sqrt{\pi}}{2}
\]

当然，也可以使用 \verb$\begin{equation}...\end{equation}$ 环境，如公式 \ref{eq_equation} 所示：

\begin{equation}\label{eq_equation}
    \int_{0}^{\infty} e^{-x^2} dx = \frac{\sqrt{\pi}}{2}
\end{equation}

更多数学公式的排版可以参考 \url{https://www.overleaf.com/learn/latex/Mathematical_expressions}.

\subsection{定理环境}

定义，命题，定理，推论等环境\emph{并非内置}，需要通过 \verb$\newtheorem$ 命令定义，如代码 \ref{newtheorem_demo} 所示。

\begin{lstlisting}[language=Tex, caption={Newtheorem example}, label={newtheorem_demo}]
    \newtheorem{definition}{\indent 定义}[section]
    \newtheorem{proposition}{\indent 命题}[section]
    \newtheorem{theorem}{\indent 定理}[section]
    \newtheorem{corollary}{\indent 推论}[section]
\end{lstlisting}

完成定义之后，可以在文档中使用这些环境，如下文第 \ref{sec_math_example} 节所示。

\subsubsection{示例：连续同伦算法}\label{sec_math_example}

\newtheorem{definition}{\indent 定义}[section]
\newtheorem{proposition}{\indent 命题}[section]
\newtheorem{theorem}{\indent 定理}[section]
\newtheorem{corollary}{\indent 推论}[section]

\begin{definition}
  设 \(X\) 与 \(Y\) 是拓扑空间, \(f_0,f_1:X\to Y\) 是连续映像. 记 \(I=[0,1]\). 若存在连续映像 \(H:X\times I\to Y\), 使得对一切 \(x\in X\) 成立 \(H(x,0)=f_0(x)\) 与 \(H(x,1)=f_1(x)\), 则称 \(f_0\) 同伦于 \(f_1\), 记为 \(f_0\simeq f_1:X\to Y\). 称映像 \(H\) 为从 \(f_0\) 到 \(f_1\) 的\textbf{同伦}或\textbf{伦移}, 记为 \(H:f_0\simeq f_1\) 或 \(f_0 \overset{H}{\simeq} f_1\). 若一个映像 \(f:X\to Y\) 同伦于常值映像, 就说 \(f\) 是一个\textbf{零伦}, 记为 \(f\simeq 0\).
  \footnote{The content of this section is randomly  stolen from \url{https://github.com/runfengtsui/mathnotes} \emph{without} the author's permission. Random modifications are made for the sake of testing.}
\end{definition}

\begin{theorem}
  记 \(C(X,Y)\) 是 \(X\) 到 \(Y\) 的一切连续映像之集合, 则同伦关系在 \(C(X,Y)\) 中是一种等价关系.
\end{theorem}

根据这一定理, 从 \(X\) 到 \(Y\) 的连续映像集合 \(C(X,Y)\) 按同伦关系可分成若干互不相交的等价类, 其中每一类成为一个\textbf{同伦类}.

常见同伦:
\begin{description}
  \item[线性同伦] \(H(x,t)=tg(x)+(1-t)f(x)\);
  \item[Newton 同伦] \(H(x,t)=\);
\end{description}

\begin{theorem}[广义 Sard 定理, 参数化 Sard 定理]
设 \(U\subset\mathbb{R}^m,V\subset\mathbb{R}^q\) 是开集, \(\phi:U\times V\to\mathbb{R}^p\) 是 \(C^r\) 映射, \(r\ge\max\lbrace 0,m-p\rbrace\). 若 \(0\in\mathbb{R}^p\) 是 \(\phi\) 的正则值, 则对几乎所有 \(a\in V\), \(0\) 是映射 \(\phi(\cdot,a):U\to\mathbb{R}^p\) 的正则值.
\end{theorem}

\begin{corollary}
设 \(\Omega\) 为 \(\mathrm{R}^n\) 中的有界闭凸集, 映像 \(F:\Omega\to \Omega\) 连续. 则 \(F\) 在 \(\Omega\) 中必有不动点, 即必有 \(\boldsymbol{x}^*\in \Omega\), 使得 \(F \left(\boldsymbol{x}^*\right)=\boldsymbol{x}^*\).
\end{corollary}

\section{枚举、算法和代码}\label{sec_enum_algo_code}


\subsection{枚举}

下面是一个 \verb|\begin{enumerate}...\end{enumerate}| 环境的示例：

\begin{enumerate}
    \item 海伯利安\\
    第八届世界未来学大会在哥斯达黎加举行。说实话，要不是塔兰托加教授明确指示我必须参加这个会议，我根本不会去纽纳斯那种地方。

    \item 海伯利安的陨落（后面刻意加了大空行：）\\

    \item 安迪密恩

    \item 安迪密恩的觉醒

\end{enumerate}

上文第 \ref{sec_text_style} 节中的文本样式演示，是一个 \verb|\begin{itemize}...\end{itemize}| 环境的示例。

\subsection{算法}

算法块由 algorithm2e 宏包\cite{algorithm2e}实现，排版效果如算法 \ref{algo_recom} 所示。

\begin{algorithm}[H]
    \caption{一种朴素的推荐算法}
    \label{algo_recom}

    \SetKwInOut{Input}{Input}
    \SetKwInOut{Data}{Data}
    \SetKwInOut{Output}{Output}

    \Input{user $u_i \in U$}
    \Data{objects $\forall o_j \in O$}
    \Output{recommended objects $o'_0, \cdots, o'_k$}

    $u \leftarrow embedding(u_i)$\;

    \For{$o_j \in O$}{
        $o \leftarrow embedding(o_j)$\;
        $r_{i,j} \leftarrow ranking(u, o)$\;
    }

    $O' \leftarrow sorted(\forall o_j \in O$ by $r_{i,j})$\;
    return $\{o'_0, \cdots, o'_k\} \subseteq  O'$\;
\end{algorithm}

\subsection{代码}

\subsubsection{行内代码}\label{sec_inline_code}

用 \verb$\verb|...|$ 可以写句内的等宽代码，如果代码内要有竖线(\verb$|$)，则可以把定界符 \verb$|$ 替换为 \verb|$|。

\subsubsection{代码块}

代码块使用 listings 宏包\cite{listings}实现。配置了等宽小字体，支持多种语言的基本语法高亮，如代码 \ref{lst_code} 所示。

\begin{lstlisting}[language=Python, caption={Python example}, label={lst_code}]
import numpy as np
    
def incmatrix(genl1,genl2):
    m = len(genl1)
    n = len(genl2)
    M = None #to become the incidence matrix
    VT = np.zeros((n*m,1), int)  #dummy variable
    
    #compute the bitwise xor matrix
    M1 = bitxormatrix(genl1)
    M2 = np.triu(bitxormatrix(genl2),1) 

    for i in range(m-1):
        for j in range(i+1, m):
            [r,c] = np.where(M2 == M1[i,j])
            for k in range(len(r)):
                VT[(i)*n + r[k]] = 1;
                VT[(i)*n + c[k]] = 1;
                VT[(j)*n + r[k]] = 1;
                VT[(j)*n + c[k]] = 1;
                
                if M is None:
                    M = np.copy(VT)
                else:
                    M = np.concatenate((M, VT), 1)
                
                VT = np.zeros((n*m,1), int)
    
    return M
\end{lstlisting}

\section{表格和图片}\label{sec_table_img}

\subsection{表格}

表 \ref{tab_simple} 是一个简单的表格 \footnote{该表格统计了《银河帝国（全套 15 册）》（艾萨克·阿西莫夫 著，叶李华 译，江苏凤凰文艺出版社，2012）系列书籍。}，使用了 tabular 环境。

\begin{table}[!ht]
    \centering
    \caption{一个简单的表格}
    \label{tab_simple}
    \begin{tabular}{ccl}
        \hline
        系列 & & 书籍 \\
        \hline
        机器人  & 短篇集 & 我·机器人 \\
               & 长篇 & 钢穴，裸阳，曙光中的机器人，机器人与帝国 \\
        \\
        银河帝国 & 三部曲 & 繁星若尘，星空暗流，苍穹一粟 \\
        \\
        基地 & 前传 & 基地前奏，迈向基地 \\
            & 三部曲 & 基地，基地与帝国，第二基地 \\
            & 后传 & 基地边缘，基地与地球\\
        \hline
    \end{tabular}
\end{table}

一个复杂的表格如表 \ref{tab_emotextBenchmark} 所示。该表引入了宽度缩放（tabcolsep）、表格注释（threeparttable）、三线表（toprule、midrule、bottomrule）等诸多特性，在实际的使用中，可以按需删减。

\begin{table}[!ht]
    \centering
    \setlength{\tabcolsep}{8mm}{
        \caption{某种带有注释的复杂三线表}
        \label{tab_emotextBenchmark}
        \begin{threeparttable}
            \begin{tabular}{cccc}
                \toprule
                Loops       & Time                & sec per loop & Mem     \\
                \midrule
                0\tnote{*}  & -                   & -            & 132.9MB \\
                1\tnote{**} & 0.731               & 0.7314       & 194.8MB \\
                10          & 0.646               & 0.0646       & 171.8MB \\
                100         & 6.227               & 0.0623       & 171.8MB \\
                1000        & 69.22               & 0.0692       & 171.8MB \\
                % \hline
                % 测试环境        & \multicolumn{3}{l}{
                %     Intel(R) Core(TM) i5-7360U CPU @ 2.30GHz
                % }                                                          \\
                % ~           & \multicolumn{3}{l}{
                %     Python 3.9.9 (main, Nov 21 2021, 03:23:44)
                % }                                                          \\
                % ~           & \multicolumn{3}{l}{
                %     [Clang 13.0.0 (clang-1300.0.29.3)] on darwin
                % }                                                          \\
                \bottomrule
            \end{tabular}
            \begin{tablenotes}
                \footnotesize
                \item[*] 这是一个注释。
                \item[**] 这是表格的另一个注释。
            \end{tablenotes}
        \end{threeparttable}
    }
\end{table}

\subsection{单图片}

插入图片如图 \ref{fig_lstm} 所示，推荐图片导出为 PDF 格式，PDF 在这里引用进来之后是可以选中里面的文字的，非常 fancy。

\begin{figure}[h!tbp]
    \centering
    \includegraphics[width=0.8\linewidth]{imgs/lstmCell.pdf}
    \caption{一个关于 LSTM 的图片}
    \label{fig_lstm}
\end{figure}

如果 $\mathtt{width=0.8 \backslash linewidth}$ 的写法超出纸张了，也可以尝试用 $\mathtt{scale=0.6}$ 之类的缩放语法。

\subsection{双图并排}

一种简单的双图并排排版如图 \ref{fig_two} 所示。其中值得注意的是，这里的 subfigure 以及里面的 includegraphics 的宽度设置就非常玄学，不同的图片需要手动调整，多做尝试。

\begin{figure}[!ht]
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width=0.9\linewidth]{imgs/TODO.pdf}
        \caption{左边的子图}
        \label{fig_subfig_1}
    \end{subfigure}
    % \hspace{0.8cm}
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width=0.9\linewidth]{imgs/TODO.pdf}
        \caption{右边的子图}
        \label{fig_subfig_2}
    \end{subfigure}
    \caption{并排的两个图片}
    \label{fig_two}
\end{figure}

\section{结论}

星星逐渐稀疏，银河耀目的光亮也暗淡下来，逐渐从他相逢过的灿烂光华，化为一种淡淡的魅光——但是将来等他准备好之后，会再度与那灿烂光华相逢。

他精确地回到自己想去的那个地方——那个人类称之为真实的空间。

% =============== appendix ===============

\newpage

\appendix

\section{附录: 参考的编译设置}\label{appendix_a}

\begin{lstlisting}[language=Go, caption={适用于 VS Code + LaTeX Workshop 的编译设置}, label={lst_vscode}]
    "latex-workshop.latex.recipes": [
        {
          "name": "xelatex -> bibtex -> xelatex × 2",
          "tools": ["xelatex", "bibtex", "xelatex", "xelatex"]
        },
    ],
    "latex-workshop.latex.tools": [
        {
          "name": "xelatex",
          "command": "xelatex",
          "args": [
            "--shell-escape", 
            "-synctex=1", 
            "-interaction=nonstopmode", 
            "-file-line-error", 
            "%DOC%"
          ],
          "env": {}
        },
        {
          "name": "bibtex",
          "command": "bibtex",
          "args": ["%DOCFILE%"],
          "env": {}
        }
    ]
\end{lstlisting}

% =============== bibliography ===============

\newpage

% \ctexset{
%     section = {
%       format = \normalsize\bfseries\centering,
%      }
% }
\bibliography{references.bib}

\end{document}
